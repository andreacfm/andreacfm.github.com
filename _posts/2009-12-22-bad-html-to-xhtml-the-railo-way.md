---
layout: post
title: 'Bad html to Xhtml. The Railo way.'
date: 2009-12-22
wordpress-id: bad-html-to-xhtml-the-railo-way
comments: true
---
<p>I have worked quite hard in the last period with an interesting xhtml rendering java library called "<a href="https://xhtmlrenderer.dev.java.net/" target="_blank">flying saucer</a>" ( I will post more about that in the next future).</p>
<!--more-->
<p>This library takes a valid xhtml string and is capable to convert it into a pdf document ( and more formats ) . </p>
<p>What makes this lib special is the ability to format the output using css 2 and 3 stataments. And I could not imagine ahow many things css 2 and 3 is capable of....</p>
<p>I was just worried about the source doc cause that <strong>must</strong> be a perfectly valid xml document. Sometimes, depending on how the string to be parsed is generated, respecting the strict xml rules can be difficult.</p>
<p>I then discovered that Railo ships an htmlFormat() function that is capable to "repair" your bad html and gives you back a nice xhtml format. </p>
<p>Look at this example:</p>
<p>This is a very bad html piece of code saved into a variables and parsed into htmlParse()</p>

{% highlight html %}
<cfsavecontent variable="html">
Text
<h3>Title
    <ul>
        <li>item<li>
        item
     </ul>
     <li>More text<img src="" ></li>
</cfsavecontent>
<cfset xml=htmlParse(html)>
{% endhighlight %}

<p>Here is the output generated by htmlParse()</p>

{% highlight xml %}
<?xml version="1.0" encoding="UTF-8"?>
<html>
<body>Text
    <br />
    <h3>Title</h3>
    <ul>
        <li>item</li>
        <li>item</li>
    </ul>
    <ul>
        <li>More text <img src=""/></li>
    </ul>
</body>
</html>
{% endhighlight %}

<p>As you can see this is a perfectly valid xhtml string.</p>
<p>I am now sure that I can give to my xhtml rendrering library the xhtml formts it needs with no worry about how bad the source can be.</p>
<p>Thanks to <a href="http://www.getrailo.org/" target="_blank">Railo</a> for this amazing feature.</p>
